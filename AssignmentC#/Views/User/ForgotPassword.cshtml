@{
    ViewBag.Title = "Recovery | Forgot Password";
}

<section id="login" class="p_3">
    <div class="container-xl">
        <div class="row login_1 justify-content-center">
            <div class="col-md-12">
                @* 1. Added id="forgotForm" to target it with JS *@
                <form id="forgotForm" asp-controller="User" asp-action="ForgotPassword" method="post">

                    <div class="login_1m p-5 px-4 w-50 mx-auto bg-light shadow-sm">

                        <h2 class="text-center mb-4 fw-bold">Forgot Password</h2>
                        <p class="text-muted text-center mb-4">Enter your email and we'll send you a link to reset your password.</p>

                        <h6 class="mb-3 fw-bold mt-4">Email Address</h6>
                        <input type="email" name="email" class="form-control" placeholder="example@mail.com" required />

                        <div class="mt-4">
                            <h6 class="mt-3 center_sm">
                                @* 2. Added id="btnSubmit" to easily change the text *@
                                <button type="submit" id="btnSubmit" class="button d-block text-center w-100">
                                    SEND RESET LINK
                                </button>
                            </h6>
                        </div>

                        <div class="mt-4 text-center">
                            <p class="mb-0">
                                Remembered your password?
                                <a asp-controller="User" asp-action="Login" class="fw-bold rol_oran">Login</a>
                            </p>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        document.getElementById("forgotForm").addEventListener("submit", function (e) {
            // The 'submit' event only fires if the HTML5 'required' validation passes
            var btn = document.getElementById("btnSubmit");

            // 1. Disable the button so they can't click twice
            btn.disabled = true;

            // 2. Change the text to show loading
            // If you are using Bootstrap, we can add a spinner icon too:
            btn.innerHTML = 'SENDING... <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>';

            // If you don't want the spinner icon, just use:
            // btn.innerText = "SENDING...";
        });
    </script>
}