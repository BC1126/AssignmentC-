@{
    ViewBag.Title = "Product | Index";
}

@section head {
    <style>
        .info-bar {
            background: #f8f9fa;
            padding: 10px;
            margin-bottom: 10px;
            text-align: center;
            border-radius: 6px;
            margin-top: 10px;
        }

        .top-bar {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .back-btn {
            text-decoration: none;
            padding: 6px 12px;
            background: #6c757d;
            color: #fff;
            border-radius: 5px;
            font-size: 14px;
            margin-left: 20px;
        }

        .category-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            background: #fff;
            padding: 14px 0;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }

        .cat-btn {
            color: #000;
            text-decoration: none;
            font-size: 18px;
            padding-bottom: 6px;
            position: relative;
            font-weight: 500;
        }

            .cat-btn:hover {
                color: #000;
            }

            .cat-btn.active {
                font-weight: 700;
            }

                .cat-btn.active::after {
                    content: "";
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 100%;
                    height: 3px;
                    background: #000;
                }

        .cart-btn {
            margin-left: auto;
            margin-right: 20px;
            position: relative;
            text-decoration: none;
            background: #000;
            color: #fff;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

            .cart-btn:hover {
                background: #333;
                color: #fff;
            }

        .cart-count {
            position: absolute;
            top: -6px;
            right: -6px;
            background: red;
            color: #fff;
            font-size: 11px;
            font-weight: bold;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

    </style>
}

<div class="info-bar">
    <strong>Region:</strong> @ViewBag.Region |
    <strong>Cinema:</strong> @ViewBag.Cinema |
    <strong>Collect Date:</strong> @ViewBag.CollectDate
</div>

<div class="top-bar">
    <a asp-action="UserSelectRegion" class="back-btn">← Back</a>

    <a asp-controller="Product"
       asp-action="ShoppingCart"
       class="cart-btn">
        🛒 Cart
        <span class="cart-count">@((ViewBag.Cart?.Count) ?? 0)</span>
    </a>
</div>


<div class="category-bar">
    <a asp-action="UserIndex"
       class="cat-btn @(ViewBag.SelectedCategory == null ? "active" : "")">
        All
    </a>

    @foreach (var c in (List<string>)ViewBag.Categories)
    {
        <a asp-action="UserIndex"
           asp-route-category="@c"
           class="cat-btn @(ViewBag.SelectedCategory == c ? "active" : "")">
            @c
        </a>
    }
</div>

<div id="target">
    <partial name="_UserIndex" />
</div>
